<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Resurgence (PY2022): can::motor Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Resurgence (PY2022)
   </div>
   <div id="projectbrief">Codebase for the Husky Robotics 2021-2022 rover Resurgence</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecan.html">can</a></li><li class="navelem"><a class="el" href="namespacecan_1_1motor.html">motor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">can::motor Namespace Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Utilities for interacting with motor boards over a CAN interface.  
<a href="namespacecan_1_1motor.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcan_1_1motor_1_1sensor__t.html">sensor_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The supported motor position sensors.  <a href="structcan_1_1motor_1_1sensor__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a74e4e1121ce20fb929e82f4d5caed88b"><td class="memItemLeft" align="right" valign="top"><a id="a74e4e1121ce20fb929e82f4d5caed88b" name="a74e4e1121ce20fb929e82f4d5caed88b"></a>enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a74e4e1121ce20fb929e82f4d5caed88b">motormode_t</a> { <b>pwm</b> = MOTOR_UNIT_MODE_PWM
, <b>pid</b> = MOTOR_UNIT_MODE_PID
 }</td></tr>
<tr class="memdesc:a74e4e1121ce20fb929e82f4d5caed88b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The possible motor modes. <br /></td></tr>
<tr class="separator:a74e4e1121ce20fb929e82f4d5caed88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adc2d7e351335d09610a09780cbed9bde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#adc2d7e351335d09610a09780cbed9bde">emergencyStopMotors</a> ()</td></tr>
<tr class="memdesc:adc2d7e351335d09610a09780cbed9bde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emergency stop all motors on the CAN bus.  <br /></td></tr>
<tr class="separator:adc2d7e351335d09610a09780cbed9bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed6d24cbbf89da0bb3eb1dc11bc8b72e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#aed6d24cbbf89da0bb3eb1dc11bc8b72e">initMotor</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial)</td></tr>
<tr class="memdesc:aed6d24cbbf89da0bb3eb1dc11bc8b72e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a motor.  <br /></td></tr>
<tr class="separator:aed6d24cbbf89da0bb3eb1dc11bc8b72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4cac5edf238d3d3dce9cd2b32015751"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#af4cac5edf238d3d3dce9cd2b32015751">setMotorPIDConstants</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> kP, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> kI, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> kD)</td></tr>
<tr class="memdesc:af4cac5edf238d3d3dce9cd2b32015751"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the PID constants for a motor board.  <br /></td></tr>
<tr class="separator:af4cac5edf238d3d3dce9cd2b32015751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5c314d6964158f588099ae2cce5a161"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#aa5c314d6964158f588099ae2cce5a161">setMotorMode</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="el" href="namespacecan_1_1motor.html#a74e4e1121ce20fb929e82f4d5caed88b">motormode_t</a> mode)</td></tr>
<tr class="memdesc:aa5c314d6964158f588099ae2cce5a161"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the mode of a motor board.  <br /></td></tr>
<tr class="separator:aa5c314d6964158f588099ae2cce5a161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b1bd661cbd859a8b6a169b2b0386e28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a4b1bd661cbd859a8b6a169b2b0386e28">setMotorPower</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, double power)</td></tr>
<tr class="memdesc:a4b1bd661cbd859a8b6a169b2b0386e28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the power output of a motor board.  <br /></td></tr>
<tr class="separator:a4b1bd661cbd859a8b6a169b2b0386e28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c251243129745f601b9c1a770ea7939"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a3c251243129745f601b9c1a770ea7939">setMotorPower</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#af4c7df4eb83784f8746e143ee9792ad4">int16_t</a> power)</td></tr>
<tr class="memdesc:a3c251243129745f601b9c1a770ea7939"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the power output of a motor board.  <br /></td></tr>
<tr class="separator:a3c251243129745f601b9c1a770ea7939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e1a69516ed47142f01d7e2394dc44c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a77e1a69516ed47142f01d7e2394dc44c">setMotorPIDTarget</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> target)</td></tr>
<tr class="memdesc:a77e1a69516ed47142f01d7e2394dc44c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the position PID target of a motor board.  <br /></td></tr>
<tr class="separator:a77e1a69516ed47142f01d7e2394dc44c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a566a73312d54f8c5e439e6c414fc7a5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classrobot_1_1types_1_1DataPoint.html">DataPoint</a>&lt; <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a566a73312d54f8c5e439e6c414fc7a5f">getMotorPosition</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial)</td></tr>
<tr class="memdesc:a566a73312d54f8c5e439e6c414fc7a5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the last reported position of a motor.  <br /></td></tr>
<tr class="separator:a566a73312d54f8c5e439e6c414fc7a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b1ed31074df37917d234af08c2aa67"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a26b1ed31074df37917d234af08c2aa67">pullMotorPosition</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial)</td></tr>
<tr class="memdesc:a26b1ed31074df37917d234af08c2aa67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Poll the position data from a motor board.  <br /></td></tr>
<tr class="separator:a26b1ed31074df37917d234af08c2aa67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7603e86ca01598b51e3d5c3b4d76fa7b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecan.html#ab8d3110d8e240e98c6299118bf2fba9a">callbackid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a7603e86ca01598b51e3d5c3b4d76fa7b">addLimitSwitchCallback</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, const std::function&lt; void( <a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="el" href="classrobot_1_1types_1_1DataPoint.html">robot::types::DataPoint</a>&lt; <a class="el" href="classrobot_1_1types_1_1LimitSwitchData.html">robot::types::LimitSwitchData</a> &gt; limitSwitchData)&gt; &amp;callback)</td></tr>
<tr class="memdesc:a7603e86ca01598b51e3d5c3b4d76fa7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a callback that is invoked when the limit switch is triggered for a motor board.  <br /></td></tr>
<tr class="separator:a7603e86ca01598b51e3d5c3b4d76fa7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7afd2bf689a9b364a2fb67216b940597"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a7afd2bf689a9b364a2fb67216b940597">removeLimitSwitchCallback</a> (<a class="el" href="namespacecan.html#ab8d3110d8e240e98c6299118bf2fba9a">callbackid_t</a> id)</td></tr>
<tr class="memdesc:a7afd2bf689a9b364a2fb67216b940597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a previously registered limit switch callback.  <br /></td></tr>
<tr class="separator:a7afd2bf689a9b364a2fb67216b940597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a94bbe1a8abe8fd968d4c56658960a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a6a94bbe1a8abe8fd968d4c56658960a7">initEncoder</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, bool invertEncoder, bool zeroEncoder, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> pulsesPerJointRev, std::optional&lt; <a class="elRef" href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/libstdc++/api/a01559.html#a979a98673e4244630e142461b1026d74">std::chrono::milliseconds</a> &gt; telemetryPeriod)</td></tr>
<tr class="memdesc:a6a94bbe1a8abe8fd968d4c56658960a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an encoder attached to the given motor.  <br /></td></tr>
<tr class="separator:a6a94bbe1a8abe8fd968d4c56658960a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7831a61147dcf3f0a72e80878ae13bfa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecan_1_1motor.html#a7831a61147dcf3f0a72e80878ae13bfa">initPotentiometer</a> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> posLo, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> posHi, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ab8f9e3c8d45fa2f89547aa6367185a6f">uint16_t</a> adcLo, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ab8f9e3c8d45fa2f89547aa6367185a6f">uint16_t</a> adcHi, std::optional&lt; <a class="elRef" href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/libstdc++/api/a01559.html#a979a98673e4244630e142461b1026d74">std::chrono::milliseconds</a> &gt; telemetryPeriod)</td></tr>
<tr class="memdesc:a7831a61147dcf3f0a72e80878ae13bfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a potentiometer attached to the given motor.  <br /></td></tr>
<tr class="separator:a7831a61147dcf3f0a72e80878ae13bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a94bbe1a8abe8fd968d4c56658960a7"><td class="memItemLeft" align="right" valign="top"><a id="a6a94bbe1a8abe8fd968d4c56658960a7" name="a6a94bbe1a8abe8fd968d4c56658960a7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>initEncoder</b> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, bool invertEncoder, bool zeroEncoder, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> pulsesPerJointRev, std::optional&lt; <a class="elRef" href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/libstdc++/api/a01559.html#a979a98673e4244630e142461b1026d74">std::chrono::milliseconds</a> &gt; telemetryPeriod)</td></tr>
<tr class="separator:a6a94bbe1a8abe8fd968d4c56658960a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7831a61147dcf3f0a72e80878ae13bfa"><td class="memItemLeft" align="right" valign="top"><a id="a7831a61147dcf3f0a72e80878ae13bfa" name="a7831a61147dcf3f0a72e80878ae13bfa"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>initPotentiometer</b> (<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> posLo, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> posHi, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ab8f9e3c8d45fa2f89547aa6367185a6f">uint16_t</a> adcLo, <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ab8f9e3c8d45fa2f89547aa6367185a6f">uint16_t</a> adcHi, std::optional&lt; <a class="elRef" href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/libstdc++/api/a01559.html#a979a98673e4244630e142461b1026d74">std::chrono::milliseconds</a> &gt; telemetryPeriod)</td></tr>
<tr class="separator:a7831a61147dcf3f0a72e80878ae13bfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utilities for interacting with motor boards over a CAN interface. </p>
<p>These motor boards can either be AVR or PSoC boards. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7603e86ca01598b51e3d5c3b4d76fa7b" name="a7603e86ca01598b51e3d5c3b4d76fa7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7603e86ca01598b51e3d5c3b4d76fa7b">&#9670;&#160;</a></span>addLimitSwitchCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecan.html#ab8d3110d8e240e98c6299118bf2fba9a">callbackid_t</a> can::motor::addLimitSwitchCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a> serial, <a class="el" href="classrobot_1_1types_1_1DataPoint.html">robot::types::DataPoint</a>&lt; <a class="el" href="classrobot_1_1types_1_1LimitSwitchData.html">robot::types::LimitSwitchData</a> &gt; limitSwitchData)&gt; &amp;&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a callback that is invoked when the limit switch is triggered for a motor board. </p>
<p>The event is only triggered when the limit switch is clicked, not released.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">callback</td><td>The callback to invoke when the limit switch is triggered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>callbackid_t An ID that refers to this callback. This can be passed to <a class="el" href="namespacecan_1_1motor.html#a7afd2bf689a9b364a2fb67216b940597" title="Remove a previously registered limit switch callback.">removeLimitSwitchCallback()</a> to remove this callback. </dd></dl>

</div>
</div>
<a id="adc2d7e351335d09610a09780cbed9bde" name="adc2d7e351335d09610a09780cbed9bde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc2d7e351335d09610a09780cbed9bde">&#9670;&#160;</a></span>emergencyStopMotors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::emergencyStopMotors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Emergency stop all motors on the CAN bus. </p>
<p>This cuts power to all motors and resets them. </p>

</div>
</div>
<a id="a566a73312d54f8c5e439e6c414fc7a5f" name="a566a73312d54f8c5e439e6c414fc7a5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a566a73312d54f8c5e439e6c414fc7a5f">&#9670;&#160;</a></span>getMotorPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classrobot_1_1types_1_1DataPoint.html">robot::types::DataPoint</a>&lt; <a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a> &gt; can::motor::getMotorPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the last reported position of a motor. </p>
<p>This only reports the cached position, it does not poll the motor board for new data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The serial number of the motor board. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>robot::types::DataPoint&lt;int32_t&gt; The position data of the given motor, in millidegrees. If no position data has been received, returns an empty data point. </dd></dl>

</div>
</div>
<a id="a6a94bbe1a8abe8fd968d4c56658960a7" name="a6a94bbe1a8abe8fd968d4c56658960a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a94bbe1a8abe8fd968d4c56658960a7">&#9670;&#160;</a></span>initEncoder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::initEncoder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>invertEncoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>zeroEncoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a>&#160;</td>
          <td class="paramname"><em>pulsesPerJointRev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; <a class="elRef" href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/libstdc++/api/a01559.html#a979a98673e4244630e142461b1026d74">std::chrono::milliseconds</a> &gt;&#160;</td>
          <td class="paramname"><em>telemetryPeriod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize an encoder attached to the given motor. </p>
<p>For potentiometers, use <a class="el" href="namespacecan_1_1motor.html#a7831a61147dcf3f0a72e80878ae13bfa" title="Initialize a potentiometer attached to the given motor.">initPotentiometer()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">invertEncoder</td><td>If true, invert the encoder direction. Use this to correct sensor phase. </td></tr>
    <tr><td class="paramname">zeroEncoder</td><td>If true, reset the encoder position to zero. </td></tr>
    <tr><td class="paramname">pulsesPerJointRev</td><td>The number of encoder pulses per revolution of the physical joint. Measure/calculate this using the gear ratios and encoder specs. </td></tr>
    <tr><td class="paramname">telemetryPeriod</td><td>An optional parameter specifying the telemetry period. The telemetry will be fetched at this period automatically. An empty optional disables this behavior, in which case the motor position must be explicitly pulled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aed6d24cbbf89da0bb3eb1dc11bc8b72e" name="aed6d24cbbf89da0bb3eb1dc11bc8b72e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed6d24cbbf89da0bb3eb1dc11bc8b72e">&#9670;&#160;</a></span>initMotor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::initMotor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a motor. </p>
<p>This does not initialize any sensor or controller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor to initialize. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7831a61147dcf3f0a72e80878ae13bfa" name="a7831a61147dcf3f0a72e80878ae13bfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7831a61147dcf3f0a72e80878ae13bfa">&#9670;&#160;</a></span>initPotentiometer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::initPotentiometer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a>&#160;</td>
          <td class="paramname"><em>posLo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a>&#160;</td>
          <td class="paramname"><em>posHi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ab8f9e3c8d45fa2f89547aa6367185a6f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>adcLo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ab8f9e3c8d45fa2f89547aa6367185a6f">uint16_t</a>&#160;</td>
          <td class="paramname"><em>adcHi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::optional&lt; <a class="elRef" href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/libstdc++/api/a01559.html#a979a98673e4244630e142461b1026d74">std::chrono::milliseconds</a> &gt;&#160;</td>
          <td class="paramname"><em>telemetryPeriod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a potentiometer attached to the given motor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">posLo</td><td>The joint position that corresponds to <code>adcLo</code> </td></tr>
    <tr><td class="paramname">posHi</td><td>The joint position that corresponds to <code>adcHi</code> </td></tr>
    <tr><td class="paramname">adcLo</td><td>The ADC value when the joint is at <code>posLo</code> </td></tr>
    <tr><td class="paramname">adcHi</td><td>The ADC value when the joint is at <code>posHi</code> </td></tr>
    <tr><td class="paramname">telemetryPeriod</td><td>An optional parameter specifying the telemetry period. The telemetry will be fetched at this period automatically. An empty optional disables this behavior, in which case the motor position must be explicitly pulled. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a26b1ed31074df37917d234af08c2aa67" name="a26b1ed31074df37917d234af08c2aa67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26b1ed31074df37917d234af08c2aa67">&#9670;&#160;</a></span>pullMotorPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::pullMotorPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Poll the position data from a motor board. </p>
<p>This may not be supported by every motor board implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7afd2bf689a9b364a2fb67216b940597" name="a7afd2bf689a9b364a2fb67216b940597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7afd2bf689a9b364a2fb67216b940597">&#9670;&#160;</a></span>removeLimitSwitchCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::removeLimitSwitchCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#ab8d3110d8e240e98c6299118bf2fba9a">callbackid_t</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a previously registered limit switch callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>The callback ID that was returned when the callback was registered with <a class="el" href="namespacecan_1_1motor.html#a7603e86ca01598b51e3d5c3b4d76fa7b" title="Add a callback that is invoked when the limit switch is triggered for a motor board.">addLimitSwitchCallback()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa5c314d6964158f588099ae2cce5a161" name="aa5c314d6964158f588099ae2cce5a161"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c314d6964158f588099ae2cce5a161">&#9670;&#160;</a></span>setMotorMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::setMotorMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecan_1_1motor.html#a74e4e1121ce20fb929e82f4d5caed88b">motormode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the mode of a motor board. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">mode</td><td>The mode to set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af4cac5edf238d3d3dce9cd2b32015751" name="af4cac5edf238d3d3dce9cd2b32015751"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4cac5edf238d3d3dce9cd2b32015751">&#9670;&#160;</a></span>setMotorPIDConstants()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::setMotorPIDConstants </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a>&#160;</td>
          <td class="paramname"><em>kP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a>&#160;</td>
          <td class="paramname"><em>kI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a>&#160;</td>
          <td class="paramname"><em>kD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the PID constants for a motor board. </p>
<p>Note that the PID constants are specified in units of 10000, so a 1 is interpreted as a</p><ol type="1">
<li>This is because the controller operates on millidegrees.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">kP</td><td>The P coefficient. </td></tr>
    <tr><td class="paramname">kI</td><td>The I coefficient. </td></tr>
    <tr><td class="paramname">kD</td><td>The D coefficient. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a77e1a69516ed47142f01d7e2394dc44c" name="a77e1a69516ed47142f01d7e2394dc44c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77e1a69516ed47142f01d7e2394dc44c">&#9670;&#160;</a></span>setMotorPIDTarget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::setMotorPIDTarget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#ad5ed0491058a71efd30a0f28ad1d3f05">int32_t</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the position PID target of a motor board. </p>
<p>The motor mode should have been set to motormode_t::pid. Additionally, both the sensor and the PID coefficients must have been initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">target</td><td>The position in millidegrees to track with the PID controller. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4b1bd661cbd859a8b6a169b2b0386e28" name="a4b1bd661cbd859a8b6a169b2b0386e28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b1bd661cbd859a8b6a169b2b0386e28">&#9670;&#160;</a></span>setMotorPower() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::setMotorPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>power</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the power output of a motor board. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">power</td><td>Percent power, in the range [-1,1]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3c251243129745f601b9c1a770ea7939" name="a3c251243129745f601b9c1a770ea7939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c251243129745f601b9c1a770ea7939">&#9670;&#160;</a></span>setMotorPower() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void can::motor::setMotorPower </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecan.html#a2c998f360a5233d716a05edfc26800a5">deviceserial_t</a>&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="https://docs.opencv.org/4.2.0/d2/d75/namespacecv.html#af4c7df4eb83784f8746e143ee9792ad4">int16_t</a>&#160;</td>
          <td class="paramname"><em>power</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the power output of a motor board. </p>
<p>The motor mode should have been set to motormode_t::pwm.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>The CAN serial number of the motor board. </td></tr>
    <tr><td class="paramname">power</td><td>The power to set. Any signed 16-bit integer is valid. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
