<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Resurgence (PY2022): Camera Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Resurgence (PY2022)
   </div>
   <div id="projectbrief">Codebase for the Husky Robotics 2021-2022 rover Resurgence</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Camera Configuration </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_src_camera_CameraConfig"></a></p>
<p>Cameras are configured using the following configuration file format. The specification given is in general terms, and the <a class="el" href="cameraconfig.html#example">example</a> is given in YAML; however, XML and JSON are also supported. Please see the OpenCV documentation on <a href="https://docs.opencv.org/4.2.0/d4/da4/group__core__xml.html">persistent file storage</a> for more details.</p>
<h2><a class="anchor" id="toplevel"></a>
Top-Level Format</h2>
<p>The top level of the configuration file should be a key-value mapping, with the following top-level keys:</p><ul>
<li><code>name</code>: The name of the camera, e.g. "mast" or "front_left". No restrictions on naming or uniqueness are currently enforced; ideally this should be unique but it isn't strictly necessary at this time.</li>
<li><code>description</code>: <em>Optional.</em> A longer description of the camera, including details like its location on the rover.</li>
<li><em>One</em> of the following. <b>If both are present, <code>filename</code> will take precedence.</b><ul>
<li><code>filename</code>: The file path or URI to a video device or stream that should be opened.</li>
<li><code>camera_id</code>: The ID of a video device that will be opened. Given ID N, the device at <code>/dev/videoN</code> will be opened.</li>
</ul>
</li>
<li><code>intrinsic_params</code>: <em>Optional.</em> Value should be a nested key-value mapping, defining a set of intrinsic camera parameters as defined in the section <a class="el" href="cameraconfig.html#intrinsic">Intrinsic Parameters</a> below.</li>
<li><p class="startli"><code>extrinsic_params</code>: <em>Optional.</em> Should be a 4x4 matrix defining a transformation from 3-dimensional coordinates in the camera's frame of reference to the rover's frame of reference. This matrix should ideally have a 3x3 <a href="https://en.wikipedia.org/wiki/Rotation_matrix#In_three_dimensions">rotation matrix</a> in the first three rows and columns, and the first three rows in the fourth column should be a translation vector. The fourth row should be <code>0, 0, 0, 1</code> so that <a href="https://en.wikipedia.org/wiki/Homogeneous_coordinates">homogeneous coordinates</a> (4-dimensional coordinates where the 4th coordinate is <code>1</code>) can be used.</p>
<p class="startli">Note that in the rover's frame of reference, the positive x-axis is towards the front, the positive y-axis is towards the left, and the positive z-axis is towards the top; in the camera's frame of reference, the positive x-axis is to the right (parallel to the image plane), the positive y-axis is down, and the positive z-axis is in the direction the camera is pointing.</p>
</li>
<li><code>calib_info</code>: <em>Optional.</em> Information from the calibration process, generated by the calibration program. See <a class="el" href="cameraconfig.html#calibinfo">Calibration Info</a> below.</li>
</ul>
<h2><a class="anchor" id="intrinsic"></a>
Intrinsic Parameters</h2>
<p>Intrinsic parameters are represented as a key-value mapping, with the following keys:</p><ul>
<li><code>camera_matrix</code>: A 3x3 matrix defining the projection of a 3D scene onto the 2D image plane of the camera.</li>
<li><code>distortion_coefficients</code>: A column vector (i.e. matrix with one column) of 4, 5, 8, 12, or 14 distortion coefficients, which define the lens distortion of the camera.</li>
<li><code>image_width</code>: The width of the image in pixels. This (along with <code>image_height</code>) will define the resolution the camera is set to, as intrinsic parameters are only valid for the resolution at which they are calibrated.</li>
<li><code>image_height</code>: The height of the image in pixels.</li>
</ul>
<h2><a class="anchor" id="calibinfo"></a>
Calibration Info</h2>
<p>Calibration information is saved by the calibration program, and provides some data relevant to the calibration process, such as the time and date of calibration, the size of the board used, and the reprojection error. You should not need to fill this section of the configuration file out yourself.</p>
<p>Probably the most important part of this section if it is present is <code>avg_reprojection_error</code>. The calibration process computes a projection matrix for the camera; multiplying the coordinates of a point in space as a column vector by this matrix will give the location they should appear in the image. The reprojection error is the distance between the computed projection and the actual location of the point in the image, and is measured in pixels; the lower this number, the better. A general rule of thumb is that you should try to aim for less than 1 pixel.</p>
<h2><a class="anchor" id="example"></a>
Example</h2>
<div class="fragment"><div class="line">%YAML:1.0</div>
<div class="line">---</div>
<div class="line">name: &quot;example_camera&quot;</div>
<div class="line">description: &quot;An example camera, not actually located on the rover.&quot;</div>
<div class="line"># Camera ID: given ID N, will attempt to use /dev/videoN.</div>
<div class="line">camera_id: 0</div>
<div class="line"># Information about the calibration process, such as the</div>
<div class="line"># reprojection error and board size.</div>
<div class="line">calib_info:</div>
<div class="line">   calibration_time: &quot;Sat 08 May 2021 12:19:35 PM PDT&quot;</div>
<div class="line">   board_width: 10</div>
<div class="line">   board_height: 7</div>
<div class="line">   square_size: 21.</div>
<div class="line">   avg_reprojection_error: 1.8641131183947526e-01</div>
<div class="line">   flags: 0</div>
<div class="line"># The actual intrinsic parameters of the camera.</div>
<div class="line">intrinsic_params:</div>
<div class="line">   camera_matrix: !!opencv-matrix</div>
<div class="line">      rows: 3</div>
<div class="line">      cols: 3</div>
<div class="line">      dt: d</div>
<div class="line">      data: [ 6.4859611612740241e+02, 0., 3.2923686348750090e+02, 0.,</div>
<div class="line">          6.5023092591714169e+02, 2.4355655685247874e+02, 0., 0., 1. ]</div>
<div class="line">   distortion_coefficients: !!opencv-matrix</div>
<div class="line">      rows: 5</div>
<div class="line">      cols: 1</div>
<div class="line">      dt: d</div>
<div class="line">      data: [ -4.1887226549228418e-01, 1.6973679483281634e-01,</div>
<div class="line">          8.8881372228211163e-04, 9.6518575595955756e-04, 0. ]</div>
<div class="line">   image_width: 640</div>
<div class="line">   image_height: 480</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
