<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Resurgence (PY2022): filters::PoseEstimator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Resurgence (PY2022)
   </div>
   <div id="projectbrief">Codebase for the Husky Robotics 2021-2022 rover Resurgence</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>filters</b></li><li class="navelem"><a class="el" href="classfilters_1_1PoseEstimator.html">PoseEstimator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classfilters_1_1PoseEstimator-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">filters::PoseEstimator Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Uses an Extended Kalman Filter to estimate the robot pose.  
 <a href="classfilters_1_1PoseEstimator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PoseEstimator_8h_source.html">PoseEstimator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a499ff7a8f8a860c08e48068e6002e979"><td class="memItemLeft" align="right" valign="top"><a id="a499ff7a8f8a860c08e48068e6002e979" name="a499ff7a8f8a860c08e48068e6002e979"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><b>statevec_t</b> = <a class="elRef" href="https://eigen.tuxfamily.org/dox/classEigen_1_1Matrix.html">Eigen::Matrix</a>&lt; double, <a class="el" href="classfilters_1_1PoseEstimator.html#a057c3e0ec8591521045a76e6fe075798">numStates</a>, 1 &gt;</td></tr>
<tr class="memdesc:a499ff7a8f8a860c08e48068e6002e979"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of the state vector. <br /></td></tr>
<tr class="separator:a499ff7a8f8a860c08e48068e6002e979"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4fa48981470a023e9a7a5d36bc22c49a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#a4fa48981470a023e9a7a5d36bc22c49a">PoseEstimator</a> (const Eigen::Vector2d &amp;inputNoiseGains, const Eigen::Vector3d &amp;measurementStdDevs, double wheelBase, double dt)</td></tr>
<tr class="memdesc:a4fa48981470a023e9a7a5d36bc22c49a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new Pose Estimator.  <br /></td></tr>
<tr class="separator:a4fa48981470a023e9a7a5d36bc22c49a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0dbdd14f2026c46895c56a62d63640a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#aa0dbdd14f2026c46895c56a62d63640a">correct</a> (const navtypes::transform_t &amp;measurement)</td></tr>
<tr class="memdesc:aa0dbdd14f2026c46895c56a62d63640a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Correct the pose estimation with measurement data.  <br /></td></tr>
<tr class="separator:aa0dbdd14f2026c46895c56a62d63640a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab39bb287637e4ce6b250d936c8f8b748"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#ab39bb287637e4ce6b250d936c8f8b748">predict</a> (double thetaVel, double xVel)</td></tr>
<tr class="memdesc:ab39bb287637e4ce6b250d936c8f8b748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the model to predict the next system state, given the current inputs.  <br /></td></tr>
<tr class="separator:ab39bb287637e4ce6b250d936c8f8b748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1354e9abddc861b8a9206e40b3dfae8"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="https://eigen.tuxfamily.org/dox/classEigen_1_1Matrix.html">Eigen::Matrix</a>&lt; double, <a class="el" href="classfilters_1_1PoseEstimator.html#a057c3e0ec8591521045a76e6fe075798">numStates</a>, <a class="el" href="classfilters_1_1PoseEstimator.html#a057c3e0ec8591521045a76e6fe075798">numStates</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#aa1354e9abddc861b8a9206e40b3dfae8">getEstimateCovarianceMat</a> () const</td></tr>
<tr class="memdesc:aa1354e9abddc861b8a9206e40b3dfae8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current estimate covariance matrix.  <br /></td></tr>
<tr class="separator:aa1354e9abddc861b8a9206e40b3dfae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf432b78197e05def1906961e6658e01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#aaf432b78197e05def1906961e6658e01">reset</a> ()</td></tr>
<tr class="memdesc:aaf432b78197e05def1906961e6658e01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the pose estimator.  <br /></td></tr>
<tr class="separator:aaf432b78197e05def1906961e6658e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae61b7dda93ee1b42b9d3be4291fcc835"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#ae61b7dda93ee1b42b9d3be4291fcc835">reset</a> (const navtypes::pose_t &amp;pose)</td></tr>
<tr class="memdesc:ae61b7dda93ee1b42b9d3be4291fcc835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the pose estimator.  <br /></td></tr>
<tr class="separator:ae61b7dda93ee1b42b9d3be4291fcc835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f755d6855dad11cd9bd3acf0a696615"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#a2f755d6855dad11cd9bd3acf0a696615">reset</a> (const navtypes::pose_t &amp;pose, const navtypes::pose_t &amp;stdDevs)</td></tr>
<tr class="memdesc:a2f755d6855dad11cd9bd3acf0a696615"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the pose estimator.  <br /></td></tr>
<tr class="separator:a2f755d6855dad11cd9bd3acf0a696615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c70dfab5443bde3411c091bc4ba134"><td class="memItemLeft" align="right" valign="top">navtypes::pose_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfilters_1_1PoseEstimator.html#ab9c70dfab5443bde3411c091bc4ba134">getPose</a> () const</td></tr>
<tr class="memdesc:ab9c70dfab5443bde3411c091bc4ba134"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current state estimate.  <br /></td></tr>
<tr class="separator:ab9c70dfab5443bde3411c091bc4ba134"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a057c3e0ec8591521045a76e6fe075798"><td class="memItemLeft" align="right" valign="top"><a id="a057c3e0ec8591521045a76e6fe075798" name="a057c3e0ec8591521045a76e6fe075798"></a>
static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><b>numStates</b> = 3</td></tr>
<tr class="memdesc:a057c3e0ec8591521045a76e6fe075798"><td class="mdescLeft">&#160;</td><td class="mdescRight">The dimension of the state vector. <br /></td></tr>
<tr class="separator:a057c3e0ec8591521045a76e6fe075798"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Uses an Extended Kalman Filter to estimate the robot pose. </p>
<p>This class uses a Kalman Filter to continuously estimate the pose of the robot in 2d space. The tracked states are x, y, and heading. All of these states are in map space. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4fa48981470a023e9a7a5d36bc22c49a" name="a4fa48981470a023e9a7a5d36bc22c49a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fa48981470a023e9a7a5d36bc22c49a">&#9670;&#160;</a></span>PoseEstimator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">filters::PoseEstimator::PoseEstimator </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector2d &amp;&#160;</td>
          <td class="paramname"><em>inputNoiseGains</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>measurementStdDevs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>wheelBase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new Pose Estimator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inputNoiseGains</td><td>The gain for the noise in each dimension of the input space. This pose estimator models process noise as noise applied to the wheel velocities with standard deviation proportional to the wheel velocity. The standard deviation of the noise is modelled as k * sqrt(abs(v)) where k is the input noise gain and v is the wheel velocity. </td></tr>
    <tr><td class="paramname">measurementStdDevs</td><td>The standard deviations for each of the measurement elements. This represents additive noise in the measurements. </td></tr>
    <tr><td class="paramname">wheelBase</td><td>The distance between the left and right wheels. </td></tr>
    <tr><td class="paramname">dt</td><td>The time in seconds between updates. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa0dbdd14f2026c46895c56a62d63640a" name="aa0dbdd14f2026c46895c56a62d63640a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0dbdd14f2026c46895c56a62d63640a">&#9670;&#160;</a></span>correct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filters::PoseEstimator::correct </td>
          <td>(</td>
          <td class="paramtype">const navtypes::transform_t &amp;&#160;</td>
          <td class="paramname"><em>measurement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Correct the pose estimation with measurement data. </p>
<p>The measurement should be in the same space as the state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">measurement</td><td>The measurement to use to correct the filter, as a transform. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa1354e9abddc861b8a9206e40b3dfae8" name="aa1354e9abddc861b8a9206e40b3dfae8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1354e9abddc861b8a9206e40b3dfae8">&#9670;&#160;</a></span>getEstimateCovarianceMat()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="https://eigen.tuxfamily.org/dox/classEigen_1_1Matrix.html">Eigen::Matrix</a>&lt; double, 3, 3 &gt; filters::PoseEstimator::getEstimateCovarianceMat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current estimate covariance matrix. </p>
<p>This is an indication of the uncertainty of the pose estimate.</p>
<dl class="section return"><dt>Returns</dt><dd>The estimate covariance matrix, AKA the P matrix. </dd></dl>

</div>
</div>
<a id="ab9c70dfab5443bde3411c091bc4ba134" name="ab9c70dfab5443bde3411c091bc4ba134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9c70dfab5443bde3411c091bc4ba134">&#9670;&#160;</a></span>getPose()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pose_t filters::PoseEstimator::getPose </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current state estimate. </p>
<dl class="section return"><dt>Returns</dt><dd>The state estimate. </dd></dl>

</div>
</div>
<a id="ab39bb287637e4ce6b250d936c8f8b748" name="ab39bb287637e4ce6b250d936c8f8b748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab39bb287637e4ce6b250d936c8f8b748">&#9670;&#160;</a></span>predict()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filters::PoseEstimator::predict </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>thetaVel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>xVel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use the model to predict the next system state, given the current inputs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thetaVel</td><td>Commanded rotational velocity. </td></tr>
    <tr><td class="paramname">xVel</td><td>Commanded x velocity. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf432b78197e05def1906961e6658e01" name="aaf432b78197e05def1906961e6658e01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf432b78197e05def1906961e6658e01">&#9670;&#160;</a></span>reset() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filters::PoseEstimator::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the pose estimator. </p>
<p>Sets the state estimate to the zero vector and resets the estimate covariance matrix to a diagonal matrix with large values to reflect complete uncertainty in the current pose. If you have any information about the current pose, use <a class="el" href="classfilters_1_1PoseEstimator.html#a2f755d6855dad11cd9bd3acf0a696615" title="Reset the pose estimator.">reset(const pose_t &amp;,
const pose_t &amp;)</a> </p>

</div>
</div>
<a id="ae61b7dda93ee1b42b9d3be4291fcc835" name="ae61b7dda93ee1b42b9d3be4291fcc835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae61b7dda93ee1b42b9d3be4291fcc835">&#9670;&#160;</a></span>reset() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filters::PoseEstimator::reset </td>
          <td>(</td>
          <td class="paramtype">const navtypes::pose_t &amp;&#160;</td>
          <td class="paramname"><em>pose</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the pose estimator. </p>
<p>Sets the state estimate to the supplied vector and resets the estimate covariance matrix to a diagonal matrix with large values to reflect complete uncertainty in the current pose. If you have any information about the current pose, use <a class="el" href="classfilters_1_1PoseEstimator.html#a2f755d6855dad11cd9bd3acf0a696615" title="Reset the pose estimator.">reset(const pose_t &amp;,
const pose_t &amp;)</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose</td><td>The pose to which the state estimate will be set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2f755d6855dad11cd9bd3acf0a696615" name="a2f755d6855dad11cd9bd3acf0a696615"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f755d6855dad11cd9bd3acf0a696615">&#9670;&#160;</a></span>reset() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void filters::PoseEstimator::reset </td>
          <td>(</td>
          <td class="paramtype">const navtypes::pose_t &amp;&#160;</td>
          <td class="paramname"><em>pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const navtypes::pose_t &amp;&#160;</td>
          <td class="paramname"><em>stdDevs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the pose estimator. </p>
<p>Sets the state estimate to the supplied vector and sets the estimate covariance matrix to reflect the given uncertainty.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pose</td><td>The pose to which the state estimate will be set. </td></tr>
    <tr><td class="paramname">stdDevs</td><td>The standard deviation for each element in the pose. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/filters/<a class="el" href="PoseEstimator_8h_source.html">PoseEstimator.h</a></li>
<li>src/filters/PoseEstimator.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
